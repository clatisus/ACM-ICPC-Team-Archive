## C A Colourful Prospect

**题目大意**：给你 $n$ 个圆，问它们把平面分成了多少块。

**题解**：根据欧拉定理，有 $V+F-E=K+1$，其中 $K$ 是连通块数。故有 $F=K+1-V+E$。我们可以事先求出圆之间两两相交的情况。对于 $K$，可以很容易地用并查集求出（本题讨论即可）。对于 $V$，我们只需简单地将所有交点去重，剩下点数即为 $V$。对于 $E$，显然每一段圆弧就代表了一条边，所以我们对于每个圆，将它和其它圆的交点去重，剩下的点数正好就是该圆弧的个数。

复杂度 $\mathcal{O}(n^{2}\log n)$。

## D A Creative Cutout

**题目大意**：设平面上有 $n$ 个圆，第 $i$ 个圆为 $x^{2}+y^{2}=i$，定义平面上一个整点的价值为所有包含它的圆（在圆上也算）的序号之和，定义函数 $f(n)$ 为平面上所有整点的价值之和。求 $\sum_{i=1}^{m}f(i)$。

**题解**：对于一个距原点 $\sqrt{t}$ 的整点，它对 $f(i)(i\ge t)$ 的贡献为 $\sum_{j=t}^{i}j=\frac{i(i+1)}{2}-\frac{t(t-1)}{2}$，对最终答案的贡献为 $\sum_{i=t}^{m}\frac{i(i+1)}{2}-\frac{t(t-1)}{2}=\frac{1}{3}t^{3}-\frac{m+2}{2}t^{2}+\frac{3m+4}{6}t+\frac{m(m+1)(m+2)}{6}$，不妨记为 $g(t)=\sum_{k=0}^{3}a_{k}t^{k}$。而我们知道 $x^{2}+y^{2}=t$ 的整数解的个数为 $4(\sigma_{1}(t)-\sigma_{3}(t))$ ，其中 $\sigma_{1}(t)$ 表示 $t$ 的约数中模 $4$ 余 $1$ 的个数，$\sigma_{3}(t)$ 表示 $t$ 的约数中模 $4$ 余 $3$ 的个数。特别地，原点的贡献为 $\frac{m(m+1)(m+2)}{6}$。故答案为 $\frac{m(m+1)(m+2)}{6}+4\sum_{i=1}^{m}g(i)(\sigma_{1}(i)-\sigma_{3}(i))$。记 $S_{k}(n)=\sum_{i=1}^{n}i^{k}$，我们有
$$
\begin{aligned}
&\sum_{i=1}^{m}g(i)\sigma_{1}(i)\\
=&\sum_{i=1}\sum_{j=1}^{\lfloor\frac{m}{4i+1}\rfloor}g(ij)\\
=&\sum_{i=1}\sum_{j=1}^{\lfloor\frac{m}{4i+1}\rfloor}\sum_{k=0}^{3}a_{k}[(4i+1)j]^{k}\\
=&\sum_{k=0}^{3}a_{k}\sum_{i=1}(4i+1)^{k}\sum_{j=1}^{\lfloor\frac{m}{4i+1}\rfloor}j^{k}\\
=&\sum_{k=0}^{3}a_{k}\sum_{i=1}(4i+1)^{k}S_{k}(\lfloor\frac{m}{4i+1}\rfloor)
\end{aligned}
$$
$\sigma_{3}(i)$ 同理。

复杂度 $\mathcal{O}(\sqrt{m})$。