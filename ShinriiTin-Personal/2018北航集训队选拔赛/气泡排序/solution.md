## 气泡排序

### 题意

给出$1\le k\le n\le2\times10^5$，和数列$\{A_n\}$，求执行下面的代码后的$\{A_n\}$.

```c++
for i from 1 to k
    for j from 1 to n-1
         if Aj>Aj+1
            swap(Aj,Aj+1)
```

### 题解

显然，某次交换时$i$可以换到后面，当前仅当此时不存在一个$i$左边的位置大于它。

$k$轮之后，$i$没有能向右移动的充要条件是原数列中$i$左边大于它的位置不少于$k$个。

因为没有能向右移动，这些数最终的位置会向左移动$k$，因为原来在左边的$k$个位置成功越过了它。

剩下的位置就是给成功发生了移动的数，这些数显然是有序的，依次填入空白位置即可。

可以写一个归并排序来统计每个数的逆序数，顺便完成排序，时间复杂度$O(n\log{n})$.