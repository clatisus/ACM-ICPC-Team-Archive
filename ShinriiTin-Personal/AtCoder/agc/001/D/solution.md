## [D - Arrays and Palindrome](https://agc001.contest.atcoder.jp/tasks/agc001_d)

**题目大意：**

有两个正整数数列$a$和$b$，满足$\sum a=\sum b=N$。

并且，如果一个长度为$N$的字符串满足：

- 按$a_1,\cdots,a_m$分成不相交的$m$段，则每段都是回文串；

- 按$b_1,\cdots,b_k$分成不相交的$k$段，则每段都是回文串；

上述两个条件，则其一定是由单一字符组成的字符串。

现在只知道数列$a$是给定数列$A$的一个排列，请给出一个合法的$a,b$数列，或者判断其不可能。

$1\le N\le10^5,1\le m\le 100$.

**题解：**

对于$M=1$的情况：显然$N=1$的时候$a,b$都是$\{1\}$，当$N>1$时，取$b=\{N-1,1\}$即可。

对于$M=2$的情况：若$a={a_1,a_2}$，显然$b=\{a_1-1,a_2+1\}$满足条件。

对于$M\ge3$的情况：

如果$A$中奇数项多于$2$，无解，证明如下：

设$a$中奇数项有$O_a$个，$b$中奇数项有$O_b$个，则一共有$\displaystyle\frac{N-O_a}{2}+\frac{N-O_b}{2}$条边，要使图连通，则边数不能小于$N-1$，因此有$O_a+O_b\le2$。

如果$A$中奇数项不多于$2$，我们尽量将奇数项移动到首尾两个位置，然后令$b=\{a_1-1,a_2,\cdots,a_{M-1},a_M+1\}$，这样恰好有$N-1$条边且不存在环，证明如下：

$a_i=b_i,2\le i\le M-1$，且$a_i$为偶数，两段错开一位，用这部分的边可以将$a_i+1$个点内部连通，形成以首尾两个点为端点的一条链。

$a_1,b_1$和$a_M,b_M$两段，$a,b$奇偶性不同，将内部的点的也连成一条链，一个端点是首尾，另一个是奇数段的中点。

这样$M$段首尾相连成为一条长链，端点为首尾两段奇数段的中点。

注意特判$a_1=1$的情况，$b$的实际长度为$M-1$而不是$M$。