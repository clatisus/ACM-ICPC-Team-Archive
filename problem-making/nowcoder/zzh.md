## A

**题目大意**：给你 $n$ 个空的不可重集，下标从 $1$ 开始。然后进行 $n$ 次操作，第 $i$ 次操作把任意一个 $1$ 到 $m$ 间的正整数插入到下标从 $i$ 到 $n$ 的所有集合中，问最终可能的状态有多少种，取模。

**题解**：首先枚举使用了多少种数字，设为 $t$，这一步的答案为 ${m\choose t}$。然后注意到每种数字只有最左边的位置产生影响，也就是说我们只需要计算哪些位置是某个数字最左边的出现即可，由于 $1$ 必然是一个这样的位置，所以这一步的答案为 ${n-1\choose t-1}$。最后我们需要计算 $t$ 种颜色出现的顺序，也就是 $t!$。因此答案为 $\sum_{t=1}^{\min\{n,m\}}t!{m\choose t}{n-1\choose t-1}$。复杂度 $\mathcal{O}(\min\{n,m\})$。

## B

**题目大意**：求所有长度为 $n$ 的排列的循环节数量的 $k$ 次幂的和，模 $998244353$。

**题解**：首先不考虑已经填入数字的情况。考虑对每种循环节数量求出相应的排列数量，设循环节有 $i$ 个，排列数量为 $f_{i}$，则答案为 $\sum_{i=1}^{n}f_{i}i^{k}$。考虑计算 $f_{i}$，首先我们可以将 $1\cdots n$ 划分为 $i$ 部分，其中每个部分恰为一个循环节。设各部分的数量为 $x_{1}\cdots x_{i}$，显然这种划分方案有 $\frac{n!}{i!\prod_{j=1}^{i}x_{j}!}$ 个。再考虑每个部分不同的循环节种数，容易看出这是一个循环排列，即为 $(x_{j}-1)!$ 种，故总数为 $\frac{n!\prod_{j=1}^{i}(x_{j}-1)!}{i!\prod_{j=1}^{i}x_{j}!}=\frac{n!}{i!\prod_{j=1}^{i}x_{j}}$。考虑枚举所有不同的 $x_{j}$，那么有 $f_{i}=\sum_{(\sum_{j=1}^{i}x_{j})=n}\frac{n!}{i!\prod_{j=1}^{i}x_{j}}$。容易发现这是一个卷积形式，设 $F(x)=\sum_{j=1}^{+\infty}\frac{x^{j}}{j}$，则有 $f_{i}=\frac{n!}{i!}[x^{n}]F^{i}(x)$。故最终答案为 $n![x^{n}](\sum_{i=0}^{+\infty}i^{k}\frac{F^{i}(x)}{i!})$。不妨设 $G(x)=\sum_{i=0}^{+\infty}\frac{F^{i}(x)}{i!}=e^{F(x)}$。由于 $i^{k}=\sum_{j=0}^{k}S(k,j)(i)_{j}$，其中 $S(k,j)$ 表示第二类斯特林数，$(i)_{j}$ 表示 $i$ 的 $j$ 次下降阶乘幂，即 $(i)_{j}=\prod_{u=0}^{j-1}(i-u)$。故答案为
$$
\begin{aligned}
&n![x^{n}](\sum_{i=0}^{+\infty}\sum_{j=0}^{k}S(k,j)(i)_{j}\frac{F^{i}(x)}{i!})\\
=&n!\sum_{j=0}^{k}S(k,j)[x^{n}](\sum_{i=j}^{+\infty}\frac{F^{i}(x)}{(i-j)!})\\
=&n!\sum_{j=0}^{k}S(k,j)[x^{n}](F^{j}(x)\sum_{i=0}^{+\infty}\frac{F^{i}(x)}{i!})\\
=&n!\sum_{j=0}^{k}S(k,j)[x^{n}](F^{j}(x)G(x))
\end{aligned}
$$
斯特林数和 $F^{j}(x)G(x)$ 均可以预处理，故时间复杂度 $\mathcal{O}(kn\log n+k\log k+Tk)$。