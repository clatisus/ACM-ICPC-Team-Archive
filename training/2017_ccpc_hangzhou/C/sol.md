## C Hakase and Nano

**题目大意**：将 `Nim` 游戏的规则改为其中一个人（`h`）每次必须连续进行两次操作（最后一次除外），拿到最后一颗石子的人胜。分析 `h` 在不同先后手情况下的输赢情况。

**题解**：

- 若每堆石子都只有 $1$ 颗

  - 若 `h` 先手，则 $n\equiv0\pmod{3}$ 时 `h` 负，否则 `h` 胜。
  - 若 `h` 后手，则 $n\equiv1\pmod{3}$ 时 `h` 负，否则 `h` 胜。

- 若恰有 $1$ 堆石子多于 $1$ 颗，其余每堆石子都只有 $1$ 颗

  - 若 `h` 先手，则 `h` 必胜。他有两种不同的选择：将那堆石子分两次取完，或者一次取完后再取另外一堆石子。这两种选择得到的新 $n$ 恰好相差 $1$，必有一种是 `h` 的胜态。
  - 若 `h` 后手，则 $n\equiv2\pmod{3}$ 时 `h` 胜，否则 `h` 负。$n\equiv0\pmod{3}$ 时，另一个人可以将那一堆石子取到只剩 $1$ 颗；$n\equiv1\pmod{3}$ 时，另一个人可以将那堆石子全部取走；否则他不论怎么取都是 `h` 的胜态。

- 若多于 $1$ 颗石子的堆数大于 $1$

  `h` 必胜，我们归纳地证明这一结论：

  - 若 `h` 先手
    - 若恰有 $2$ 堆石子多于 $1$ 颗，其余每堆石子都只有 $1$ 颗。`h` 有两种不同的选择：将两堆石子都取完，或者取完一堆石子，另一堆石子取到只剩 $1$ 颗。这两种选择得到的新 $n$ 恰好相差 $1$，必有一种是 `h` 的胜态。
    - 若多于 $2$ 堆石子多于 $1$ 颗。`h` 可以分两次取完一堆石子，必然是他的胜态。
  - 若 `h` 后手，由于另一个人只能操作一次，因此他取完后至少还有一堆石子大于 $1$ 颗，这必然是 `h` 的胜态。